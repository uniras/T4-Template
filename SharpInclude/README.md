SharpInclude    ソースコード取り込みテンプレート
====

概要
----

SharpTemplateは、その名の通りソースコードを取り込んで出力するテンプレートです。

プロジェクトのコードをT4の処理で使いたい時や、共通するコードを特定の部分に差し込みたい時などに使います。

単純にファイルを取り込むと余計な物をいろいろ取り込んでしまうので(というかそれでいいならincludeディレクティブ使えばいいので)、

取り込まれる側で取り込む範囲を明示的に指定します。

そのまま出力することはもちろん、T4内で使うための機能ブロックの形で出力することも出来ます。

機能ブロックとして出力する際にはusingディレクティブを解析してT4のimportディレクティブに変換したコードも併せて出力します。


インストール
----

SharpInclude.t4をプロジェクトに追加するだけです。


使い方
----

取り込まれる元のファイルの取り込みたい範囲を```//<++ ～ //++>```で囲みます。

範囲を複数指定することは可能ですが、入れ子にすると正しく取り込みません。

取り込む先のテンプレートは次のようにします。

    <#@ template debug="false" hostspecific="true" language="C#" #>
    <#@ include file="SharpInclude.t4" #>
	<#@ output extension=".t4" #>
    <#= SharpInclude("取り込みたいファイル") #>

これで取り込みたいファイルで指定した範囲のコードがT4の機能ブロックとして出力されますので、includeすることでT4内で利用することが出来るようになります。


リファレンス
----

SharpIncludeで利用できるメソッドは次の通りです。

>SharpInclude(string file, int pos, bool inusing)

ファイルから指定範囲のコードの全てもしくは一部を機能ブロックとして取り込みます。

file - 取り込むファイル名を指定します。呼び出し元のテンプレートファイルのパスを基準とした相対パスが使えます。<br/>
pos - 範囲が複数指定されている時に何番目を取り込むのかを0オリジン(pos+1番目)で指定します。負の値を渡すと全て取り込みます。指定しないと全て取り込みます。<br/>
inusin - usingディレクティブを解析してimportディレクティブを出力するかどうかを指定します。指定しないとusingディレクティブを解析して出力します。


>SharpIncludeList(params string[] files)

複数のファイルの指定範囲のコードを全て機能ブロックとして取り込みます。

files - 取り込むファイルをカンマ(,)で区切って複数指定します。


>SharpMixin(string file, int pos)

ファイルから指定範囲のコードの全てもしくは一部をそのまま取り込みます。

file - 取り込むファイル名を指定します。呼び出し元のテンプレートファイルのパスを基準とした相対パスが使えます。<br />
pos - 範囲が複数指定されている時に何番目を取り込むのかを0オリジン(pos+1番目)で指定します。負の値を渡すと全て取り込みます。指定しないと全て取り込みます。


>SharpMixinList(params string[] files)

複数のファイルの指定範囲のコードを全て機能ブロックとして取り込みます。

files - 取り込むファイルをカンマ(,)で区切って複数指定します。


ライセンス
-----

NYSLです

http://www.kmonos.net/nysl/